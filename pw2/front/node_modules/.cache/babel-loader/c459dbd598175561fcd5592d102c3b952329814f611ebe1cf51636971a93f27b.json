{"ast":null,"code":"var _jsxFileName = \"D:\\\\Clases\\\\Programacion Web II\\\\PW2_Project\\\\pw2\\\\front\\\\src\\\\Dashboard.js\",\n  _s = $RefreshSig$();\nimport 'bootstrap/dist/css/bootstrap.css';\nimport React, { useState, useEffect } from 'react';\nimport Masonry from 'masonry-layout';\nimport axiosInstance from './AxiosConf/axiosconf';\n\n//Componentes\nimport CardContainer from './components/cardContainerDashboard';\nimport Menu from './components/menuComponent';\nimport { usePerfil } from './components/publicacionUtils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Dashboard() {\n  _s();\n  const [allImg, setAllImg] = useState([]);\n  const [base64Images, setBase64Images] = useState([]);\n  const [hasFollowed, setHasFollowed] = useState(true);\n  const perfil = usePerfil();\n  useEffect(() => {\n    console.log(\"User ID:\", userId);\n    axiosInstance.get(\"http://localhost:3000/getufollowed\").then(response => {\n      if (response.data === \"No imagen\") {\n        alert(\"No hay imágenes\");\n      } else {\n        setAllImg(response.data);\n      }\n    }).catch(error => {\n      console.error(\"Error fetching images:\", error);\n    });\n  }, []);\n  useEffect(() => {\n    if (allImg.length > 0 && Array.isArray(allImg[0]) && allImg[0].length === 0) {\n      console.log(\"No hay datos en allImg[0]\");\n      setHasFollowed(false);\n    }\n  }, [allImg]);\n  useEffect(() => {\n    const convertImagesToBase64 = async () => {\n      if (allImg.length > 0 && Array.isArray(allImg[0]) && allImg[0].length > 0) {\n        const base64Promises = allImg[0].map(val => {\n          const blob = new Blob([new Uint8Array(val.foto_post.data)], {\n            type: 'image/jpeg'\n          });\n          const reader = new FileReader();\n          reader.readAsDataURL(blob);\n          return new Promise(resolve => {\n            reader.onloadend = () => {\n              resolve(reader.result.split(',')[1]);\n            };\n          });\n        });\n        try {\n          const base64Strings = await Promise.all(base64Promises);\n          setBase64Images(base64Strings);\n        } catch (error) {\n          console.error(\"Error converting images to base64:\", error);\n        }\n      }\n    };\n    convertImagesToBase64();\n  }, [allImg]);\n  useEffect(() => {\n    const initializeMasonry = () => {\n      const grid = document.querySelector('.row-cols-md-3');\n      if (grid) {\n        const masonry = new Masonry(grid, {\n          itemSelector: '.col',\n          percentPosition: true\n        });\n        masonry.layout();\n      }\n    };\n    initializeMasonry();\n  }, [allImg]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Menu, {\n      perfil: perfil\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), hasFollowed ? /*#__PURE__*/_jsxDEV(CardContainer, {\n      data: base64Images.map((base64String, index) => ({\n        imageUrl: base64String,\n        title: allImg[0][index].titulo_post,\n        idpost: allImg[0][index].id_post\n      }))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container d-flex justify-content-center align-items-center\",\n      style: {\n        minHeight: '100vh'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        style: {\n          fontSize: '2rem'\n        },\n        children: \"Comienza a seguir tus artistas favoritos en \\\"Explorar\\\"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true);\n}\n_s(Dashboard, \"4jSSINzIoWbrzgU+BbKmzOSQato=\", false, function () {\n  return [usePerfil];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useState","useEffect","Masonry","axiosInstance","CardContainer","Menu","usePerfil","jsxDEV","_jsxDEV","Fragment","_Fragment","Dashboard","_s","allImg","setAllImg","base64Images","setBase64Images","hasFollowed","setHasFollowed","perfil","console","log","userId","get","then","response","data","alert","catch","error","length","Array","isArray","convertImagesToBase64","base64Promises","map","val","blob","Blob","Uint8Array","foto_post","type","reader","FileReader","readAsDataURL","Promise","resolve","onloadend","result","split","base64Strings","all","initializeMasonry","grid","document","querySelector","masonry","itemSelector","percentPosition","layout","children","fileName","_jsxFileName","lineNumber","columnNumber","base64String","index","imageUrl","title","titulo_post","idpost","id_post","className","style","minHeight","fontSize","_c","$RefreshReg$"],"sources":["D:/Clases/Programacion Web II/PW2_Project/pw2/front/src/Dashboard.js"],"sourcesContent":["import 'bootstrap/dist/css/bootstrap.css';\nimport React, { useState, useEffect } from 'react';\nimport Masonry from 'masonry-layout';\nimport axiosInstance from './AxiosConf/axiosconf';\n\n//Componentes\nimport CardContainer from './components/cardContainerDashboard';\nimport Menu from './components/menuComponent';\nimport {usePerfil} from './components/publicacionUtils';\n\nfunction Dashboard() {\n    const [allImg, setAllImg] = useState([]);\n    const [base64Images, setBase64Images] = useState([]);\n    const [hasFollowed, setHasFollowed] = useState(true);\n    const perfil = usePerfil();    \n\n    useEffect(() => {\n        console.log(\"User ID:\", userId);\n        axiosInstance.get(\"http://localhost:3000/getufollowed\")\n            .then((response) => {\n                if (response.data === \"No imagen\") {\n                    alert(\"No hay imágenes\");\n                } else {\n                    setAllImg(response.data);\n                }\n            })\n            .catch((error) => {\n                console.error(\"Error fetching images:\", error);\n            });\n    }, []);\n\n    useEffect(() => {\n        if (allImg.length > 0 && Array.isArray(allImg[0]) && allImg[0].length === 0) {\n            console.log(\"No hay datos en allImg[0]\");\n            setHasFollowed(false);\n        }\n    }, [allImg]);\n\n    useEffect(() => {\n        const convertImagesToBase64 = async () => {\n            if (allImg.length > 0 && Array.isArray(allImg[0]) && allImg[0].length > 0) {\n                const base64Promises = allImg[0].map((val) => {\n                    const blob = new Blob([new Uint8Array(val.foto_post.data)], { type: 'image/jpeg' });\n                    const reader = new FileReader();\n                    reader.readAsDataURL(blob);\n                    return new Promise((resolve) => {\n                        reader.onloadend = () => {\n                            resolve(reader.result.split(',')[1]);\n                        };\n                    });\n                });\n\n                try {\n                    const base64Strings = await Promise.all(base64Promises);\n                    setBase64Images(base64Strings);\n                } catch (error) {\n                    console.error(\"Error converting images to base64:\", error);\n                }\n            }\n        };\n\n        convertImagesToBase64();\n    }, [allImg]);\n\n    useEffect(() => {\n        const initializeMasonry = () => {\n            const grid = document.querySelector('.row-cols-md-3');\n            if (grid) {\n                const masonry = new Masonry(grid, {\n                    itemSelector: '.col',\n                    percentPosition: true\n                });\n                masonry.layout();\n            }\n        };\n\n        initializeMasonry();\n    }, [allImg]);\n\n    return (\n        <>\n            <Menu perfil={perfil} /> \n            {hasFollowed ?\n                (\n                    <CardContainer data={\n                        base64Images.map(\n                            (base64String, index) => (\n                                {\n                                    imageUrl: base64String,\n                                    title: allImg[0][index].titulo_post,\n                                    idpost: allImg[0][index].id_post\n                                }\n                            )\n                        )\n                    } />\n                )\n                :\n                (\n                    <div className=\"container d-flex justify-content-center align-items-center\" style={{ minHeight: '100vh' }}>\n                        <div className=\"text-center\" style={{ fontSize: '2rem' }}>\n                            Comienza a seguir tus artistas favoritos en \"Explorar\"\n                        </div>\n                    </div>\n                )\n            }\n        </>\n    );\n}\n\nexport default Dashboard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}