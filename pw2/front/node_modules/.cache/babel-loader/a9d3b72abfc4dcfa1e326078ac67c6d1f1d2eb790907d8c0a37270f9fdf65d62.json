{"ast":null,"code":"import{useState,useEffect}from'react';import Swal from'sweetalert2';import axiosInstance from'../AxiosConf/axiosconf';import{useNavigate}from'react-router-dom';export function usePerfil(){const nav=useNavigate();const[perfil,setPerfil]=useState({ID:'',nombre:'',nickname:'',email:'',descripcion:'',foto:''});useEffect(()=>{axiosInstance.get('/perfilMenu').then(response=>{setPerfil({ID:response.data.id,nombre:response.data.nombre,nickname:response.data.nickname,email:response.data.email,descripcion:response.data.descripcion,foto:response.data.foto});}).catch(error=>{nav('/');//console.error(\"Error al obtener la información del perfil:\", error);\n});},[]);return perfil;}export function usePublicacion(id_post){const[publicacion,setPublicacion]=useState({});useEffect(()=>{axiosInstance.get(`/publicacion/${id_post}`).then(response=>{const data=response.data;//console.log(response.data.id_autor);\nif(data.imageUrl){//data.imageUrl = `data:image/jpeg;base64,${data.imageUrl}`;\n}if(data.autorPfp){//data.autorPfp = `data:image/jpeg;base64,${data.autorPfp}`;\n}setPublicacion(data);}).catch(error=>{console.error(\"Error al obtener la información de la postcación:\",error);});},[id_post]);return[publicacion,setPublicacion];}export function useFollow(authorId){const[followed,setFollowed]=useState(false);useEffect(()=>{axiosInstance.get(`/isFollowing/${authorId}`).then(response=>{setFollowed(response.data);}).catch(error=>{console.error('Error al verificar si sigue al autor:',error);});},[authorId]);const handleFollowButtonClick=()=>{if(followed){axiosInstance.post('/unfollow',{authorId}).then(response=>{setFollowed(false);Swal.fire({title:'Dejaste de seguir al usuario',text:':C',icon:'warning',confirmButtonText:'Lo seeee'});}).catch(error=>{console.error('Error al dejar de seguir al autor:',error);});}else{axiosInstance.post('/follow',{authorId}).then(response=>{setFollowed(true);Swal.fire({title:'Comenzaste a seguir al usuario con éxito',text:'<3',icon:'success',confirmButtonText:'Yeiiiiii :DD'});}).catch(error=>{console.error('Error al seguir al autor:',error);});}};return{followed,handleFollowButtonClick};}export function useComment(){const[commentText,setCommentText]=useState('');const[commentError,setCommentError]=useState('');const handleFormSubmit=(event,id_post,id_usuario,reloadComments)=>{event.preventDefault();if(commentText.trim()===''){setCommentError('Por favor, escribe un comentario antes de enviar.');}else{setCommentError('');console.log(commentText);axiosInstance.post('/addComm',{id_post,id_usuario,commentText}).then(()=>{setCommentText('');window.location.reload();// Recargar la página\n}).catch(error=>{console.error(\"Error al enviar el comentario:\",error);setCommentError('Error al enviar el comentario. Inténtalo de nuevo.');});}};return{commentText,setCommentText,commentError,handleFormSubmit};}export function useLikes(postId){const[likes,setLikes]=useState(0);const[liked,setLiked]=useState(false);useEffect(()=>{axiosInstance.get(`/likes/${postId}`).then(response=>{setLikes(response.data.likes);}).catch(error=>{console.error('Error al obtener los likes:',error);});axiosInstance.get(`/isLiked/${postId}`).then(response=>{setLiked(response.data);}).catch(error=>{console.error('Error al verificar si ha dado like:',error);});},[postId]);const handleLikeButtonClick=()=>{if(liked){axiosInstance.post('/unlike',{postId}).then(response=>{setLikes(likes-1);setLiked(false);}).catch(error=>{console.error('Error al quitar el like:',error);});}else{axiosInstance.post('/like',{postId}).then(response=>{setLikes(likes+1);setLiked(true);}).catch(error=>{if(error.response&&error.response.status===400){Swal.fire({icon:'warning',title:'Advertencia',text:'Ya has dado like a esta postcación'});}else{console.error('Error al agregar el like:',error);}});}};return{likes,liked,handleLikeButtonClick};}","map":{"version":3,"names":["useState","useEffect","Swal","axiosInstance","useNavigate","usePerfil","nav","perfil","setPerfil","ID","nombre","nickname","email","descripcion","foto","get","then","response","data","id","catch","error","usePublicacion","id_post","publicacion","setPublicacion","imageUrl","autorPfp","console","useFollow","authorId","followed","setFollowed","handleFollowButtonClick","post","fire","title","text","icon","confirmButtonText","useComment","commentText","setCommentText","commentError","setCommentError","handleFormSubmit","event","id_usuario","reloadComments","preventDefault","trim","log","window","location","reload","useLikes","postId","likes","setLikes","liked","setLiked","handleLikeButtonClick","status"],"sources":["D:/Clases/Programacion Web II/PW2_Project/pw2/front/src/components/publicacionUtils.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport Swal from 'sweetalert2';\nimport axiosInstance from '../AxiosConf/axiosconf';\nimport { useNavigate } from 'react-router-dom';\n\nexport function usePerfil() {\n    const nav = useNavigate();\n    const [perfil, setPerfil] = useState({\n        ID: '',\n        nombre: '',\n        nickname: '',\n        email: '',\n        descripcion: '',\n        foto: ''\n    });\n\n    useEffect(() => {\n        axiosInstance.get('/perfilMenu')\n            .then(response => {\n                setPerfil({\n                    ID: response.data.id,\n                    nombre: response.data.nombre,\n                    nickname: response.data.nickname,\n                    email: response.data.email,\n                    descripcion: response.data.descripcion,\n                    foto: response.data.foto\n                });\n            })\n            .catch(error => {\n                nav('/');\n                //console.error(\"Error al obtener la información del perfil:\", error);\n            });\n    }, []);\n\n    return perfil;\n}\n\nexport function usePublicacion(id_post) {\n    const [publicacion, setPublicacion] = useState({});\n\n    useEffect(() => {\n        axiosInstance.get(`/publicacion/${id_post}`)\n            .then(response => {\n                const data = response.data;\n                //console.log(response.data.id_autor);\n                if (data.imageUrl) {\n                    //data.imageUrl = `data:image/jpeg;base64,${data.imageUrl}`;\n                }\n                if (data.autorPfp) {\n                    //data.autorPfp = `data:image/jpeg;base64,${data.autorPfp}`;\n                }\n                setPublicacion(data);\n            })\n            .catch(error => {\n                console.error(\"Error al obtener la información de la postcación:\", error);\n            });\n    }, [id_post]);\n\n    return [publicacion, setPublicacion];\n}\n\nexport function useFollow(authorId) {\n    const [followed, setFollowed] = useState(false);\n\n    useEffect(() => {\n        axiosInstance.get(`/isFollowing/${authorId}`)\n            .then(response => {\n                setFollowed(response.data);\n            })\n            .catch(error => {\n                console.error('Error al verificar si sigue al autor:', error);\n            });\n    }, [authorId]);\n\n    const handleFollowButtonClick = () => {\n        if (followed) {\n            axiosInstance.post('/unfollow', { authorId })\n                .then(response => {\n                    setFollowed(false);\n                    Swal.fire({\n                        title: 'Dejaste de seguir al usuario',\n                        text: ':C',\n                        icon: 'warning',\n                        confirmButtonText: 'Lo seeee'\n                    })\n                })\n                .catch(error => {\n                    console.error('Error al dejar de seguir al autor:', error);\n                });\n        } else {\n            axiosInstance.post('/follow', { authorId })\n                .then(response => {\n                    setFollowed(true);\n                    Swal.fire({\n                        title: 'Comenzaste a seguir al usuario con éxito',\n                        text: '<3',\n                        icon: 'success',\n                        confirmButtonText: 'Yeiiiiii :DD'\n                    })\n                })\n                .catch(error => {\n                    console.error('Error al seguir al autor:', error);\n                });\n        }\n    };\n\n    return { followed, handleFollowButtonClick };\n}\n\nexport function useComment() {\n    const [commentText, setCommentText] = useState('');\n    const [commentError, setCommentError] = useState('');\n\n    const handleFormSubmit = (event, id_post, id_usuario, reloadComments) => {\n        event.preventDefault();\n        if (commentText.trim() === '') {\n            setCommentError('Por favor, escribe un comentario antes de enviar.');\n        } else {\n            setCommentError('');\n            console.log(commentText)\n            axiosInstance.post('/addComm', { id_post, id_usuario, commentText })\n                .then(() => {\n                    setCommentText('');\n                    window.location.reload(); // Recargar la página\n                })\n                .catch(error => {\n                    console.error(\"Error al enviar el comentario:\", error);\n                    setCommentError('Error al enviar el comentario. Inténtalo de nuevo.');\n                });\n        }\n    };\n\n    return { commentText, setCommentText, commentError, handleFormSubmit };\n}\n\nexport function useLikes(postId) {\n    const [likes, setLikes] = useState(0);\n    const [liked, setLiked] = useState(false);\n\n    useEffect(() => {\n        axiosInstance.get(`/likes/${postId}`)\n            .then(response => {\n                setLikes(response.data.likes);\n            })\n            .catch(error => {\n                console.error('Error al obtener los likes:', error);\n            });\n\n        axiosInstance.get(`/isLiked/${postId}`)\n            .then(response => {\n                setLiked(response.data);\n            })\n            .catch(error => {\n                console.error('Error al verificar si ha dado like:', error);\n            });\n    }, [postId]);\n\n    const handleLikeButtonClick = () => {\n        if (liked) {\n            axiosInstance.post('/unlike', { postId })\n                .then(response => {\n                    setLikes(likes - 1);\n                    setLiked(false);\n                })\n                .catch(error => {\n                    console.error('Error al quitar el like:', error);\n                });\n        } else {\n            axiosInstance.post('/like', { postId })\n                .then(response => {\n                    setLikes(likes + 1);\n                    setLiked(true);\n                })\n                .catch(error => {\n                    if (error.response && error.response.status === 400) {\n                        Swal.fire({\n                            icon: 'warning',\n                            title: 'Advertencia',\n                            text: 'Ya has dado like a esta postcación'\n                        });\n                    } else {\n                        console.error('Error al agregar el like:', error);\n                    }\n                });\n        }\n    };\n\n    return { likes, liked, handleLikeButtonClick };\n}\n\n\n\n\n"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAO,CAAAC,IAAI,KAAM,aAAa,CAC9B,MAAO,CAAAC,aAAa,KAAM,wBAAwB,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAE9C,MAAO,SAAS,CAAAC,SAASA,CAAA,CAAG,CACxB,KAAM,CAAAC,GAAG,CAAGF,WAAW,CAAC,CAAC,CACzB,KAAM,CAACG,MAAM,CAAEC,SAAS,CAAC,CAAGR,QAAQ,CAAC,CACjCS,EAAE,CAAE,EAAE,CACNC,MAAM,CAAE,EAAE,CACVC,QAAQ,CAAE,EAAE,CACZC,KAAK,CAAE,EAAE,CACTC,WAAW,CAAE,EAAE,CACfC,IAAI,CAAE,EACV,CAAC,CAAC,CAEFb,SAAS,CAAC,IAAM,CACZE,aAAa,CAACY,GAAG,CAAC,aAAa,CAAC,CAC3BC,IAAI,CAACC,QAAQ,EAAI,CACdT,SAAS,CAAC,CACNC,EAAE,CAAEQ,QAAQ,CAACC,IAAI,CAACC,EAAE,CACpBT,MAAM,CAAEO,QAAQ,CAACC,IAAI,CAACR,MAAM,CAC5BC,QAAQ,CAAEM,QAAQ,CAACC,IAAI,CAACP,QAAQ,CAChCC,KAAK,CAAEK,QAAQ,CAACC,IAAI,CAACN,KAAK,CAC1BC,WAAW,CAAEI,QAAQ,CAACC,IAAI,CAACL,WAAW,CACtCC,IAAI,CAAEG,QAAQ,CAACC,IAAI,CAACJ,IACxB,CAAC,CAAC,CACN,CAAC,CAAC,CACDM,KAAK,CAACC,KAAK,EAAI,CACZf,GAAG,CAAC,GAAG,CAAC,CACR;AACJ,CAAC,CAAC,CACV,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,CAAAC,MAAM,CACjB,CAEA,MAAO,SAAS,CAAAe,cAAcA,CAACC,OAAO,CAAE,CACpC,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAGzB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAElDC,SAAS,CAAC,IAAM,CACZE,aAAa,CAACY,GAAG,CAAE,gBAAeQ,OAAQ,EAAC,CAAC,CACvCP,IAAI,CAACC,QAAQ,EAAI,CACd,KAAM,CAAAC,IAAI,CAAGD,QAAQ,CAACC,IAAI,CAC1B;AACA,GAAIA,IAAI,CAACQ,QAAQ,CAAE,CACf;AAAA,CAEJ,GAAIR,IAAI,CAACS,QAAQ,CAAE,CACf;AAAA,CAEJF,cAAc,CAACP,IAAI,CAAC,CACxB,CAAC,CAAC,CACDE,KAAK,CAACC,KAAK,EAAI,CACZO,OAAO,CAACP,KAAK,CAAC,mDAAmD,CAAEA,KAAK,CAAC,CAC7E,CAAC,CAAC,CACV,CAAC,CAAE,CAACE,OAAO,CAAC,CAAC,CAEb,MAAO,CAACC,WAAW,CAAEC,cAAc,CAAC,CACxC,CAEA,MAAO,SAAS,CAAAI,SAASA,CAACC,QAAQ,CAAE,CAChC,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGhC,QAAQ,CAAC,KAAK,CAAC,CAE/CC,SAAS,CAAC,IAAM,CACZE,aAAa,CAACY,GAAG,CAAE,gBAAee,QAAS,EAAC,CAAC,CACxCd,IAAI,CAACC,QAAQ,EAAI,CACde,WAAW,CAACf,QAAQ,CAACC,IAAI,CAAC,CAC9B,CAAC,CAAC,CACDE,KAAK,CAACC,KAAK,EAAI,CACZO,OAAO,CAACP,KAAK,CAAC,uCAAuC,CAAEA,KAAK,CAAC,CACjE,CAAC,CAAC,CACV,CAAC,CAAE,CAACS,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAG,uBAAuB,CAAGA,CAAA,GAAM,CAClC,GAAIF,QAAQ,CAAE,CACV5B,aAAa,CAAC+B,IAAI,CAAC,WAAW,CAAE,CAAEJ,QAAS,CAAC,CAAC,CACxCd,IAAI,CAACC,QAAQ,EAAI,CACde,WAAW,CAAC,KAAK,CAAC,CAClB9B,IAAI,CAACiC,IAAI,CAAC,CACNC,KAAK,CAAE,8BAA8B,CACrCC,IAAI,CAAE,IAAI,CACVC,IAAI,CAAE,SAAS,CACfC,iBAAiB,CAAE,UACvB,CAAC,CAAC,CACN,CAAC,CAAC,CACDnB,KAAK,CAACC,KAAK,EAAI,CACZO,OAAO,CAACP,KAAK,CAAC,oCAAoC,CAAEA,KAAK,CAAC,CAC9D,CAAC,CAAC,CACV,CAAC,IAAM,CACHlB,aAAa,CAAC+B,IAAI,CAAC,SAAS,CAAE,CAAEJ,QAAS,CAAC,CAAC,CACtCd,IAAI,CAACC,QAAQ,EAAI,CACde,WAAW,CAAC,IAAI,CAAC,CACjB9B,IAAI,CAACiC,IAAI,CAAC,CACNC,KAAK,CAAE,0CAA0C,CACjDC,IAAI,CAAE,IAAI,CACVC,IAAI,CAAE,SAAS,CACfC,iBAAiB,CAAE,cACvB,CAAC,CAAC,CACN,CAAC,CAAC,CACDnB,KAAK,CAACC,KAAK,EAAI,CACZO,OAAO,CAACP,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACrD,CAAC,CAAC,CACV,CACJ,CAAC,CAED,MAAO,CAAEU,QAAQ,CAAEE,uBAAwB,CAAC,CAChD,CAEA,MAAO,SAAS,CAAAO,UAAUA,CAAA,CAAG,CACzB,KAAM,CAACC,WAAW,CAAEC,cAAc,CAAC,CAAG1C,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAAC2C,YAAY,CAAEC,eAAe,CAAC,CAAG5C,QAAQ,CAAC,EAAE,CAAC,CAEpD,KAAM,CAAA6C,gBAAgB,CAAGA,CAACC,KAAK,CAAEvB,OAAO,CAAEwB,UAAU,CAAEC,cAAc,GAAK,CACrEF,KAAK,CAACG,cAAc,CAAC,CAAC,CACtB,GAAIR,WAAW,CAACS,IAAI,CAAC,CAAC,GAAK,EAAE,CAAE,CAC3BN,eAAe,CAAC,mDAAmD,CAAC,CACxE,CAAC,IAAM,CACHA,eAAe,CAAC,EAAE,CAAC,CACnBhB,OAAO,CAACuB,GAAG,CAACV,WAAW,CAAC,CACxBtC,aAAa,CAAC+B,IAAI,CAAC,UAAU,CAAE,CAAEX,OAAO,CAAEwB,UAAU,CAAEN,WAAY,CAAC,CAAC,CAC/DzB,IAAI,CAAC,IAAM,CACR0B,cAAc,CAAC,EAAE,CAAC,CAClBU,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC,CAAE;AAC9B,CAAC,CAAC,CACDlC,KAAK,CAACC,KAAK,EAAI,CACZO,OAAO,CAACP,KAAK,CAAC,gCAAgC,CAAEA,KAAK,CAAC,CACtDuB,eAAe,CAAC,oDAAoD,CAAC,CACzE,CAAC,CAAC,CACV,CACJ,CAAC,CAED,MAAO,CAAEH,WAAW,CAAEC,cAAc,CAAEC,YAAY,CAAEE,gBAAiB,CAAC,CAC1E,CAEA,MAAO,SAAS,CAAAU,QAAQA,CAACC,MAAM,CAAE,CAC7B,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAG1D,QAAQ,CAAC,CAAC,CAAC,CACrC,KAAM,CAAC2D,KAAK,CAAEC,QAAQ,CAAC,CAAG5D,QAAQ,CAAC,KAAK,CAAC,CAEzCC,SAAS,CAAC,IAAM,CACZE,aAAa,CAACY,GAAG,CAAE,UAASyC,MAAO,EAAC,CAAC,CAChCxC,IAAI,CAACC,QAAQ,EAAI,CACdyC,QAAQ,CAACzC,QAAQ,CAACC,IAAI,CAACuC,KAAK,CAAC,CACjC,CAAC,CAAC,CACDrC,KAAK,CAACC,KAAK,EAAI,CACZO,OAAO,CAACP,KAAK,CAAC,6BAA6B,CAAEA,KAAK,CAAC,CACvD,CAAC,CAAC,CAENlB,aAAa,CAACY,GAAG,CAAE,YAAWyC,MAAO,EAAC,CAAC,CAClCxC,IAAI,CAACC,QAAQ,EAAI,CACd2C,QAAQ,CAAC3C,QAAQ,CAACC,IAAI,CAAC,CAC3B,CAAC,CAAC,CACDE,KAAK,CAACC,KAAK,EAAI,CACZO,OAAO,CAACP,KAAK,CAAC,qCAAqC,CAAEA,KAAK,CAAC,CAC/D,CAAC,CAAC,CACV,CAAC,CAAE,CAACmC,MAAM,CAAC,CAAC,CAEZ,KAAM,CAAAK,qBAAqB,CAAGA,CAAA,GAAM,CAChC,GAAIF,KAAK,CAAE,CACPxD,aAAa,CAAC+B,IAAI,CAAC,SAAS,CAAE,CAAEsB,MAAO,CAAC,CAAC,CACpCxC,IAAI,CAACC,QAAQ,EAAI,CACdyC,QAAQ,CAACD,KAAK,CAAG,CAAC,CAAC,CACnBG,QAAQ,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,CACDxC,KAAK,CAACC,KAAK,EAAI,CACZO,OAAO,CAACP,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CACpD,CAAC,CAAC,CACV,CAAC,IAAM,CACHlB,aAAa,CAAC+B,IAAI,CAAC,OAAO,CAAE,CAAEsB,MAAO,CAAC,CAAC,CAClCxC,IAAI,CAACC,QAAQ,EAAI,CACdyC,QAAQ,CAACD,KAAK,CAAG,CAAC,CAAC,CACnBG,QAAQ,CAAC,IAAI,CAAC,CAClB,CAAC,CAAC,CACDxC,KAAK,CAACC,KAAK,EAAI,CACZ,GAAIA,KAAK,CAACJ,QAAQ,EAAII,KAAK,CAACJ,QAAQ,CAAC6C,MAAM,GAAK,GAAG,CAAE,CACjD5D,IAAI,CAACiC,IAAI,CAAC,CACNG,IAAI,CAAE,SAAS,CACfF,KAAK,CAAE,aAAa,CACpBC,IAAI,CAAE,oCACV,CAAC,CAAC,CACN,CAAC,IAAM,CACHT,OAAO,CAACP,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACrD,CACJ,CAAC,CAAC,CACV,CACJ,CAAC,CAED,MAAO,CAAEoC,KAAK,CAAEE,KAAK,CAAEE,qBAAsB,CAAC,CAClD"},"metadata":{},"sourceType":"module","externalDependencies":[]}