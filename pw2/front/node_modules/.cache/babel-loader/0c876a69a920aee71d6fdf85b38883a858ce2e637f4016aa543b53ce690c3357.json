{"ast":null,"code":"var _jsxFileName = \"D:\\\\Clases\\\\Programacion Web II\\\\PW2_Project\\\\pw2\\\\front\\\\src\\\\Dashboard.js\",\n  _s = $RefreshSig$();\nimport 'bootstrap/dist/css/bootstrap.css';\nimport React, { useState, useEffect } from 'react';\nimport Masonry from 'masonry-layout';\nimport axiosInstance from './AxiosConf/axiosconf';\n\n//Componentes\nimport CardContainer from './components/cardContainerDashboard';\nimport Menu from './components/menuComponent';\nimport { usePerfil } from './components/publicacionUtils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Dashboard() {\n  _s();\n  const [allImg, setAllImg] = useState([]);\n  const [base64Images, setBase64Images] = useState([]);\n  const [hasFollowed, setHasFollowed] = useState(true);\n  const perfil = usePerfil();\n  useEffect(() => {\n    axiosInstance.get(\"http://localhost:3001/getufollowed\").then(response => {\n      if (response.data === \"No imagen\") {\n        alert(\"No hay imágenes\");\n      } else {\n        setAllImg(response.data);\n      }\n    }).catch(error => {\n      console.error(\"Error fetching images:\", error);\n    });\n  }, []);\n  useEffect(() => {\n    if (allImg.length > 0 && Array.isArray(allImg[0]) && allImg[0].length === 0) {\n      console.log(\"No hay datos en allImg[0]\");\n      setHasFollowed(false);\n    }\n  }, [allImg]);\n  useEffect(() => {\n    const convertImagesToBase64 = async () => {\n      if (allImg.length > 0 && Array.isArray(allImg[0]) && allImg[0].length > 0) {\n        const base64Promises = allImg[0].map(val => {\n          const blob = new Blob([new Uint8Array(val.foto_post.data)], {\n            type: 'image/jpeg'\n          });\n          const reader = new FileReader();\n          reader.readAsDataURL(blob);\n          return new Promise(resolve => {\n            reader.onloadend = () => {\n              resolve(reader.result.split(',')[1]);\n            };\n          });\n        });\n        try {\n          const base64Strings = await Promise.all(base64Promises);\n          setBase64Images(base64Strings);\n        } catch (error) {\n          console.error(\"Error converting images to base64:\", error);\n        }\n      }\n    };\n    convertImagesToBase64();\n  }, [allImg]);\n  useEffect(() => {\n    const initializeMasonry = () => {\n      const grid = document.querySelector('.row-cols-md-3');\n      if (grid) {\n        const masonry = new Masonry(grid, {\n          itemSelector: '.col',\n          percentPosition: true\n        });\n        masonry.layout();\n      }\n    };\n    initializeMasonry();\n  }, [allImg]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Menu, {\n      perfil: perfil\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), hasFollowed ? /*#__PURE__*/_jsxDEV(CardContainer, {\n      data: base64Images.map((base64String, index) => ({\n        imageUrl: base64String,\n        title: allImg[0][index].titulo_post,\n        idPost: allImg[0][index].id_post\n      }))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 21\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container d-flex justify-content-center align-items-center\",\n      style: {\n        minHeight: '100vh'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        style: {\n          fontSize: '2rem'\n        },\n        children: \"Comienza a seguir tus artistas favoritos en \\\"Explorar\\\"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true);\n}\n_s(Dashboard, \"4jSSINzIoWbrzgU+BbKmzOSQato=\", false, function () {\n  return [usePerfil];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useState","useEffect","Masonry","axiosInstance","CardContainer","Menu","usePerfil","jsxDEV","_jsxDEV","Fragment","_Fragment","Dashboard","_s","allImg","setAllImg","base64Images","setBase64Images","hasFollowed","setHasFollowed","perfil","get","then","response","data","alert","catch","error","console","length","Array","isArray","log","convertImagesToBase64","base64Promises","map","val","blob","Blob","Uint8Array","foto_post","type","reader","FileReader","readAsDataURL","Promise","resolve","onloadend","result","split","base64Strings","all","initializeMasonry","grid","document","querySelector","masonry","itemSelector","percentPosition","layout","children","fileName","_jsxFileName","lineNumber","columnNumber","base64String","index","imageUrl","title","titulo_post","idPost","id_post","className","style","minHeight","fontSize","_c","$RefreshReg$"],"sources":["D:/Clases/Programacion Web II/PW2_Project/pw2/front/src/Dashboard.js"],"sourcesContent":["import 'bootstrap/dist/css/bootstrap.css';\r\nimport React, { useState, useEffect } from 'react';\r\nimport Masonry from 'masonry-layout';\r\nimport axiosInstance from './AxiosConf/axiosconf';\r\n\r\n//Componentes\r\nimport CardContainer from './components/cardContainerDashboard';\r\nimport Menu from './components/menuComponent';\r\nimport {usePerfil} from './components/publicacionUtils';\r\n\r\nfunction Dashboard() {\r\n    const [allImg, setAllImg] = useState([]);\r\n    const [base64Images, setBase64Images] = useState([]);\r\n    const [hasFollowed, setHasFollowed] = useState(true);\r\n    const perfil = usePerfil();    \r\n\r\n    useEffect(() => {\r\n        axiosInstance.get(\"http://localhost:3001/getufollowed\")\r\n            .then((response) => {\r\n                if (response.data === \"No imagen\") {\r\n                    alert(\"No hay imágenes\");\r\n                } else {\r\n                    setAllImg(response.data);\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                console.error(\"Error fetching images:\", error);\r\n            });\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (allImg.length > 0 && Array.isArray(allImg[0]) && allImg[0].length === 0) {\r\n            console.log(\"No hay datos en allImg[0]\");\r\n            setHasFollowed(false);\r\n        }\r\n    }, [allImg]);\r\n\r\n    useEffect(() => {\r\n        const convertImagesToBase64 = async () => {\r\n            if (allImg.length > 0 && Array.isArray(allImg[0]) && allImg[0].length > 0) {\r\n                const base64Promises = allImg[0].map((val) => {\r\n                    const blob = new Blob([new Uint8Array(val.foto_post.data)], { type: 'image/jpeg' });\r\n                    const reader = new FileReader();\r\n                    reader.readAsDataURL(blob);\r\n                    return new Promise((resolve) => {\r\n                        reader.onloadend = () => {\r\n                            resolve(reader.result.split(',')[1]);\r\n                        };\r\n                    });\r\n                });\r\n\r\n                try {\r\n                    const base64Strings = await Promise.all(base64Promises);\r\n                    setBase64Images(base64Strings);\r\n                } catch (error) {\r\n                    console.error(\"Error converting images to base64:\", error);\r\n                }\r\n            }\r\n        };\r\n\r\n        convertImagesToBase64();\r\n    }, [allImg]);\r\n\r\n    useEffect(() => {\r\n        const initializeMasonry = () => {\r\n            const grid = document.querySelector('.row-cols-md-3');\r\n            if (grid) {\r\n                const masonry = new Masonry(grid, {\r\n                    itemSelector: '.col',\r\n                    percentPosition: true\r\n                });\r\n                masonry.layout();\r\n            }\r\n        };\r\n\r\n        initializeMasonry();\r\n    }, [allImg]);\r\n\r\n    return (\r\n        <>\r\n            <Menu perfil={perfil} /> \r\n            {hasFollowed ?\r\n                (\r\n                    <CardContainer data={\r\n                        base64Images.map(\r\n                            (base64String, index) => (\r\n                                {\r\n                                    imageUrl: base64String,\r\n                                    title: allImg[0][index].titulo_post,\r\n                                    idPost: allImg[0][index].id_post\r\n                                }\r\n                            )\r\n                        )\r\n                    } />\r\n                )\r\n                :\r\n                (\r\n                    <div className=\"container d-flex justify-content-center align-items-center\" style={{ minHeight: '100vh' }}>\r\n                        <div className=\"text-center\" style={{ fontSize: '2rem' }}>\r\n                            Comienza a seguir tus artistas favoritos en \"Explorar\"\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}