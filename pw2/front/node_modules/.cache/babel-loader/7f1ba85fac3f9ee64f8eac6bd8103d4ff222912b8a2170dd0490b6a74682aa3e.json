{"ast":null,"code":"import'bootstrap/dist/css/bootstrap.css';import'bootstrap-icons/font/bootstrap-icons.css';import Swal from'sweetalert2';import styles from'./paginaWeb/css/perfil.module.css';import React,{useState,useEffect}from'react';import{useParams}from'react-router-dom';import axiosInstance from'./AxiosConf/axiosconf';//Componentes\nimport Menu from'./components/menuComponent';import{usePerfil}from'./components/publicacionUtils';import UserInfo from'./components/UserInfo';import UserPosts from'./components/UserPosts';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Perfil=()=>{const{userId}=useParams();const perfilMenu=usePerfil();const[perfil,setPerfil]=useState({ID:'',nombre:'',nickname:'',email:'',descripcion:'',foto:''});const[userPosts,setUserPosts]=useState([]);useEffect(()=>{axiosInstance.get(`/perfil/${userId}`).then(response=>{setPerfil(response.data);}).catch(error=>{console.error('Error al obtener la información del perfil:',error);});axiosInstance.get(`/userPosts/${userId}`).then(response=>{setUserPosts(response.data);}).catch(error=>{console.error('Error al obtener las publicaciones del usuario:',error);});},[userId]);const mostrarVentanaConfirmacion=postId=>{Swal.fire({title:'¿Estás seguro?',text:'Se borrará la información de forma permanente.',icon:'warning',showCancelButton:true,confirmButtonColor:'#E4AF9E',cancelButtonColor:'#d33',confirmButtonText:'Sí, borrar',cancelButtonText:'Cancelar'}).then(result=>{if(result.isConfirmed){axiosInstance.delete(`/deletePost/${postId}`).then(response=>{Swal.fire({title:'Tu post se borró con éxito',text:'<3',icon:'success',confirmButtonText:'Yeiiiiii :DD',confirmButtonColor:'#E4AF9E'}).then(result=>{if(result.isConfirmed){setUserPosts(userPosts.filter(post=>post.id!==postId));}});}).catch(error=>{console.error('Error al borrar la publicación:',error);Swal.fire({title:'Error',text:'Hubo un problema al borrar la publicación.',icon:'error',confirmButtonText:'OK',confirmButtonColor:'#E4AF9E'});});}});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Menu,{perfil:perfilMenu}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:`${styles.row} row`,children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(UserInfo,{profile:perfil,loggedInUserId:perfilMenu.ID})}),/*#__PURE__*/_jsxs(\"div\",{id:styles.pfinfo,className:\"col-md-8\",children:[/*#__PURE__*/_jsx(\"div\",{id:styles.pfn,children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"@\",perfil.nickname]})}),/*#__PURE__*/_jsx(UserPosts,{posts:userPosts,onDelete:mostrarVentanaConfirmacion,loggedInUserId:perfilMenu.ID})]})]})})]});};export default Perfil;","map":{"version":3,"names":["Swal","styles","React","useState","useEffect","useParams","axiosInstance","Menu","usePerfil","UserInfo","UserPosts","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Perfil","userId","perfilMenu","perfil","setPerfil","ID","nombre","nickname","email","descripcion","foto","userPosts","setUserPosts","get","then","response","data","catch","error","console","mostrarVentanaConfirmacion","postId","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","cancelButtonText","result","isConfirmed","delete","filter","post","id","children","className","row","profile","loggedInUserId","pfinfo","pfn","posts","onDelete"],"sources":["D:/Clases/Programacion Web II/PW2_Project/pw2/front/src/perfil.js"],"sourcesContent":["import 'bootstrap/dist/css/bootstrap.css';\nimport 'bootstrap-icons/font/bootstrap-icons.css';\nimport Swal from 'sweetalert2';\nimport styles from './paginaWeb/css/perfil.module.css';\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport axiosInstance from './AxiosConf/axiosconf';\n\n//Componentes\nimport Menu from './components/menuComponent';\nimport { usePerfil } from './components/publicacionUtils';\nimport UserInfo from './components/UserInfo';\nimport UserPosts from './components/UserPosts';\n\nconst Perfil = () => {\n    const { userId } = useParams();\n    const perfilMenu = usePerfil();\n    const [perfil, setPerfil] = useState({\n        ID: '',\n        nombre: '',\n        nickname: '',\n        email: '',\n        descripcion: '',\n        foto: ''\n    });\n    const [userPosts, setUserPosts] = useState([]);\n\n    useEffect(() => {\n        axiosInstance.get(`/perfil/${userId}`)\n            .then(response => {\n                setPerfil(response.data);\n            })\n            .catch(error => {\n                console.error('Error al obtener la información del perfil:', error);\n            });\n\n        axiosInstance.get(`/userPosts/${userId}`)\n            .then(response => {\n                setUserPosts(response.data);\n            })\n            .catch(error => {\n                console.error('Error al obtener las publicaciones del usuario:', error);\n            });\n    }, [userId]);\n\n    const mostrarVentanaConfirmacion = (postId) => {\n        Swal.fire({\n            title: '¿Estás seguro?',\n            text: 'Se borrará la información de forma permanente.',\n            icon: 'warning',\n            showCancelButton: true,\n            confirmButtonColor: '#E4AF9E',\n            cancelButtonColor: '#d33',\n            confirmButtonText: 'Sí, borrar',\n            cancelButtonText: 'Cancelar'\n        }).then((result) => {\n            if (result.isConfirmed) {\n                axiosInstance.delete(`/deletePost/${postId}`)\n                    .then(response => {\n                        Swal.fire({\n                            title: 'Tu post se borró con éxito',\n                            text: '<3',\n                            icon: 'success',\n                            confirmButtonText: 'Yeiiiiii :DD',\n                            confirmButtonColor: '#E4AF9E'\n                        }).then((result) => {\n                            if (result.isConfirmed) {\n                                setUserPosts(userPosts.filter(post => post.id !== postId));\n                            }\n                        });\n                    })\n                    .catch(error => {\n                        console.error('Error al borrar la publicación:', error);\n                        Swal.fire({\n                            title: 'Error',\n                            text: 'Hubo un problema al borrar la publicación.',\n                            icon: 'error',\n                            confirmButtonText: 'OK',\n                            confirmButtonColor: '#E4AF9E'\n                        });\n                    });\n            }\n        });\n    };\n\n    return (\n        <>\n            <Menu perfil={perfilMenu} />\n\n            <div className=\"container\">\n                <div className={`${styles.row} row`}>\n                    <div className=\"col-md-3\">\n                        {/* {console.log(perfil, perfilMenu.ID)} */}\n                        <UserInfo profile={perfil} loggedInUserId={perfilMenu.ID} />\n                    </div>\n\n                    <div id={styles.pfinfo} className=\"col-md-8\">\n                        <div id={styles.pfn}>\n                            <h3>@{perfil.nickname}</h3>\n                        </div>\n                        {/* {console.log(userPosts[0].id_post)} */}\n                        <UserPosts posts={userPosts} onDelete={mostrarVentanaConfirmacion} loggedInUserId={perfilMenu.ID} />\n                    </div>\n                </div>\n            </div>\n        </>\n    );\n};\n\nexport default Perfil;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}